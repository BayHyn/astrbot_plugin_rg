# 左轮手枪游戏插件 README  

## 一、插件概述  
基于 [AstrBot](https://github.com/AstrBotDevs/AstrBot)的群聊左轮手枪游戏插件，玩家可在群聊中进行左轮手枪射击游戏，包含随机走火、轮盘赌等核心玩法。  


## 二、插件信息  
- **插件名称**：astrbot_plugin_rg  
- **作者**：原作者：zgojin，修正者：piexian  
- **关联物品**：左轮手枪插件  


## 三、功能介绍
### 1. 装填子弹
玩家使用` /装填 子弹数量  ` 命令装填实弹
- **参数说明**：`子弹数量` 为1-6的整数，默认装1发。  

### 2. 射击
玩家使用 `/开枪`命令射击
- 实弹命中：玩家被禁言（60-300秒随机，可配置），触发击中提示。
- 空弹：仅提示“空枪”，可继续射击。  
- 所有实弹射出后，游戏结束，需重新装填。  

### 3. 随机走火

群聊中触发概率（默认0.5%），被击中玩家禁言（时长同射击）。

### 4. 走火开关
- `/走火开` 开启走火
- `/走火关` 关闭走火

### 5. 超时机制

装填后超时时间内（默认60秒，可在配置中调整）无操作，游戏自动结束。

## 四、可视化配置

插件随附 `_conf_schema.json`，可在 AstrBot 管理面板的插件配置中直接调整以下选项：

- **misfire_probability**：随机走火触发概率，支持 0.0 - 1.0。
- **timeout_seconds**：装填后等待开枪的超时时间。
- **min_ban_seconds / max_ban_seconds**：禁言惩罚的随机时长上下限。
- **misfire_enabled_by_default**：新群首次游玩时是否默认开启走火。

所有选项均提供默认值，无需手动修改配置文件即可使用。

## 五、更新日志

### 1.4.1

修复超时提示并清理导入

### 1.4.1

修改原作者代码错误导致插件不生效并且~~优化了代码~~  

### 1.3  

（别骂了别骂了）1.2版本只是把私聊消息非插件指令设置了不返回，但是实际上没有正确结束，然后我测试时一直只在群聊中测试是否有逻辑问题，没考虑到私聊导致插件出错，现在私聊只有触发插件相关指令才会提示，因此不会再导致错误（大概）  

### 1.2  

1.1版本忘记上传yml文件导致插件崩溃 修复私聊任何信息都会触发导致和其他插件冲突的问题  

### 1.1  

修复计时器结束后未正常输出消息的错误  
