# 左轮手枪游戏插件 README  

## 一、插件概述  
基于 `AstrBot` 的群聊左轮手枪游戏插件，玩家可在群聊中进行左轮手枪射击游戏，包含随机走火、轮盘赌等核心玩法。  


## 二、插件信息  
- **插件名称**：revolver_game  
- **作者**：原作者：zgojin，修正者：piexian  
- **关联物品**：左轮手枪插件  


## 三、功能介绍（指令可自定义）  
### 1. 装填子弹（指令可改）  
玩家使用 `[自定义装填指令] [子弹数量]` 命令装填实弹（默认指令：`装填`）。  
- **参数说明**：`[子弹数量]` 为1-6的整数，默认1。  
- **示例**：若自定义为`装弹`，前缀为`/`，则指令为 `/装弹 3`（装填3发）。  

### 2. 射击（指令可改）  
玩家使用 `[自定义射击指令]` 命令射击（默认指令：`开枪`）。  
- 实弹命中：玩家被禁言（60-3000秒随机，可配置），触发击中提示。  
- 空弹：仅提示“空枪”，可继续射击。  
- 所有实弹射出后，游戏结束，需重新装填。  

### 3. 随机走火（概率可配置）  
群聊中触发概率（默认0.5%，0-1范围可配置），被击中玩家禁言（时长同射击），支持控制台默认开关（新群自动应用）。  

### 4. 走火开关（指令可改）  
- `[前缀][自定义开开关指令]` 开启走火（默认：`走火开`）。  
- `[前缀][自定义关开关指令]` 关闭走火（默认：`走火关`）。  

### 5. 超时机制  
装填后超时时间内（默认60秒，可配置）无操作，游戏自动结束。  


## 四、控制台配置说明（全指令可改）  
| 配置项                | 说明                                                                 | 默认值   |
|-----------------------|----------------------------------------------------------------------|----------
| `command_load`        | 装填指令文本                                                       | 装填     |
| `command_shoot`       | 射击指令文本                                                       | 开枪     |
| `command_misfire_on`  | 开启走火指令文本                                                   | 走火开   |
| `command_misfire_off` | 关闭走火指令文本                                                   | 走火关   |
| `misfire_probability` | 随机走火概率（0-1）                                                | 0.005    |
| `default_misfire_switch` | 新群默认走火状态（true=开/false=关） | false   |
| `ban_time_range`      | 禁言时长范围（秒），含`min`（最小）和`max`（最大）                   | 60-3000  |
| `game_timeout`        | 游戏超时时间（秒）                                                 | 60       |  

**操作路径**：AstrBot控制台 → 插件管理 → 左轮手枪游戏 → 配置  


## 五、更新日志  
### 1.7 
- 全指令自定义：装填、射击、走火开关的指令文本均可在控制台修改（如将“装填”改为“装弹”）。  
- 提示文本同步：所有指令示例（如错误提示、帮助信息）自动适配控制台配置的指令。   
- 好像没有同步没找到怎么解决先放着了▄█▀█●

### 1.6 
- 新增控制台默认走火开关： 控制新群默认走火状态，可通过指令覆盖。  

### 1.5  
- 稳定性修复：解决某些场景下超时计时器重复创建的bug。  

### 1.4  
- 控制台基础配置：支持修改指令前缀、走火概率、禁言时间范围、游戏超时时间。
- 修改原作者代码错误导致插件不生效并且优化了代码

### 1.3  
（别骂了别骂了）1.2版本只是把私聊消息非插件指令设置了不返回，但是实际上没有正确结束，然后我测试时一直只在群聊中测试是否有逻辑问题，没考虑到私聊导致插件出错，现在私聊只有触发插件相关指令才会提示，因此不会再导致错误（大概）  

### 1.2  
1.1版本忘记上传yml文件导致插件崩溃 修复私聊任何信息都会触发导致和其他插件冲突的问题  

### 1.1  
修复计时器结束后未正常输出消息的错误


## 六、使用示例（控制台配置后）  
若控制台配置为：  
- 指令前缀：`/`  
- 装填指令：`装填`  
- 射击指令：`开火`  
- 开启走火指令：`走火开`  

则实际可用指令：  
- 装填3发子弹：`/装填 3`  
- 射击：`/开枪`  
- 开启走火功能：`/走火开`  
